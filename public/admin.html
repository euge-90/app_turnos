<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administraci√≥n - Turnify V2</title>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#ff6b6b">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Turnify">
    <link rel="stylesheet" href="css/turnos-calendar.css?v=0fc8869">
    <link rel="stylesheet" href="css/admin.css?v=0fc8869">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="images/logo completo.jpeg" alt="Mi Peluquer√≠a" class="logo-img">
                <h2>Panel de Administraci√≥n</h2>
            </div>
            <div class="nav-menu">
                <span id="adminNameNav" class="user-name"></span>
                <button id="darkModeToggle" class="btn-dark-mode" title="Cambiar tema">üåô</button>
                <button id="logoutBtn" class="btn-logout">Cerrar Sesi√≥n</button>
            </div>
        </div>
    </nav>

    <main class="container admin-container">
        <!-- Estad√≠sticas -->
        <section class="stats-section">
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Turnos Hoy</h3>
                    <p class="stat-number" id="turnosHoy">0</p>
                </div>
                <div class="stat-card">
                    <h3>Turnos Semana</h3>
                    <p class="stat-number" id="turnosSemana">0</p>
                </div>
                <div class="stat-card">
                    <h3>Turnos Mes</h3>
                    <p class="stat-number" id="turnosMes">0</p>
                </div>
                <div class="stat-card">
                    <h3>Total Clientes</h3>
                    <p class="stat-number" id="totalClientes">0</p>
                </div>
            </div>
        </section>

        <!-- Tabs de navegaci√≥n -->
        <div class="admin-tabs">
            <button class="admin-tab-btn active" data-tab="dashboard">üìä Dashboard</button>
            <button class="admin-tab-btn" data-tab="agenda">üìÖ Agenda del D√≠a</button>
            <button class="admin-tab-btn" data-tab="semana">üìÜ Vista Semanal</button>
            <button class="admin-tab-btn" data-tab="buscar">üîç Buscar</button>
            <button class="admin-tab-btn" data-tab="servicios">‚úÇÔ∏è Servicios</button>
            <button class="admin-tab-btn" data-tab="config">‚öôÔ∏è Configuraci√≥n</button>
        </div>

        <!-- Dashboard V2 -->
        <section id="dashboardTab" class="admin-tab-content active">
            <h2>üìä Dashboard - Resumen Completo</h2>

            <!-- M√©tricas principales -->
            <div class="dashboard-metrics">
                <div class="metric-card">
                    <h3>Ingresos del Mes</h3>
                    <p class="metric-value" id="ingresosMes">$0</p>
                </div>
                <div class="metric-card">
                    <h3>Turnos Completados</h3>
                    <p class="metric-value" id="turnosCompletadosMes">0</p>
                </div>
                <div class="metric-card">
                    <h3>Turnos Cancelados</h3>
                    <p class="metric-value" id="turnosCanceladosMes">0</p>
                </div>
                <div class="metric-card">
                    <h3>Tasa de Cancelaci√≥n</h3>
                    <p class="metric-value" id="tasaCancelacion">0%</p>
                </div>
            </div>

            <!-- Pr√≥ximo turno -->
            <div class="dashboard-section">
                <h3>üîî Pr√≥ximo Turno</h3>
                <div id="proximoTurnoContainer" class="proximo-turno-card"></div>
            </div>

            <!-- Gr√°fico de turnos por d√≠a -->
            <div class="dashboard-section">
                <h3>üìà Turnos por D√≠a (√öltimos 7 d√≠as)</h3>
                <div id="graficoTurnos" class="grafico-simple"></div>
            </div>

            <!-- Top 3 Servicios -->
            <div class="dashboard-section">
                <h3>üèÜ Top 3 Servicios del Mes</h3>
                <div id="top3Servicios" class="top-servicios-list"></div>
            </div>

            <!-- Horarios populares -->
            <div class="dashboard-section">
                <h3>‚è∞ Horarios M√°s Populares</h3>
                <div id="horariosPopulares" class="horarios-populares-list"></div>
            </div>

            <!-- Clientes frecuentes -->
            <div class="dashboard-section">
                <h3>üë• Clientes Frecuentes</h3>
                <div id="clientesFrecuentes" class="clientes-frecuentes-list"></div>
            </div>
        </section>

        <!-- Agenda del D√≠a -->
        <section id="agendaTab" class="admin-tab-content">
            <div class="agenda-header">
                <h2>Agenda - <span id="fechaAgenda"></span></h2>
                <div class="agenda-controls">
                    <button id="prevDayBtn" class="btn-secondary">‚Üê D√≠a Anterior</button>
                    <button id="todayBtn" class="btn-primary">Hoy</button>
                    <button id="nextDayBtn" class="btn-secondary">D√≠a Siguiente ‚Üí</button>
                </div>
            </div>
            <div id="agendaContainer" class="agenda-container"></div>
        </section>

        <!-- Vista Semanal -->
        <section id="semanaTab" class="admin-tab-content">
            <div class="semana-header">
                <h2>Semana del <span id="fechaSemana"></span></h2>
                <div class="semana-controls">
                    <button id="prevWeekBtn" class="btn-secondary">‚Üê Semana Anterior</button>
                    <button id="thisWeekBtn" class="btn-primary">Esta Semana</button>
                    <button id="nextWeekBtn" class="btn-secondary">Semana Siguiente ‚Üí</button>
                </div>
            </div>
            <div id="semanaContainer" class="semana-container"></div>
        </section>

        <!-- B√∫squeda -->
        <section id="buscarTab" class="admin-tab-content">
            <h2>Buscar Turnos</h2>
            <div class="search-form">
                <input type="text" id="searchInput" placeholder="Buscar por nombre o email del cliente...">
                <button id="searchBtn" class="btn-primary">Buscar</button>
            </div>
            <div id="searchResults" class="search-results"></div>
        </section>

        <!-- Gesti√≥n de Servicios -->
        <section id="serviciosTab" class="admin-tab-content">
            <h2>Gesti√≥n de Servicios</h2>

            <div class="config-section">
                <h3>Crear Nuevo Servicio</h3>
                <div class="service-form">
                    <input type="text" id="serviceNombre" placeholder="Nombre del servicio">
                    <input type="number" id="serviceDuracion" placeholder="Duraci√≥n (minutos)" min="15" step="15">
                    <input type="number" id="servicePrecio" placeholder="Precio" min="0" step="100">
                    <button id="createServiceBtn" class="btn-primary">Crear Servicio</button>
                </div>
            </div>

            <div class="config-section">
                <h3>Servicios Actuales</h3>
                <div id="serviciosListContainer" class="servicios-list"></div>
            </div>
        </section>

        <!-- Configuraci√≥n -->
        <section id="configTab" class="admin-tab-content">
            <h2>Configuraci√≥n</h2>

            <div class="config-section">
                <h3>Bloquear Fechas</h3>
                <p>Bloquea d√≠as espec√≠ficos (vacaciones, feriados, etc.)</p>
                <div class="block-date-form">
                    <input type="date" id="blockDate">
                    <input type="text" id="blockReason" placeholder="Motivo (opcional)">
                    <button id="blockDateBtn" class="btn-primary">Bloquear Fecha</button>
                </div>
                <div id="blockedDatesContainer" class="blocked-dates-list"></div>
            </div>

            <div class="config-section">
                <h3>Exportar Datos</h3>
                <p>Descarga los turnos del mes en formato CSV</p>
                <div class="export-form">
                    <select id="exportMonth">
                        <option value="0">Enero</option>
                        <option value="1">Febrero</option>
                        <option value="2">Marzo</option>
                        <option value="3">Abril</option>
                        <option value="4">Mayo</option>
                        <option value="5">Junio</option>
                        <option value="6">Julio</option>
                        <option value="7">Agosto</option>
                        <option value="8">Septiembre</option>
                        <option value="9">Octubre</option>
                        <option value="10">Noviembre</option>
                        <option value="11">Diciembre</option>
                    </select>
                    <select id="exportYear"></select>
                    <button id="exportBtn" class="btn-primary">Exportar CSV</button>
                </div>
            </div>

            <div class="config-section">
                <h3>Servicios M√°s Solicitados</h3>
                <div id="serviciosStats" class="servicios-stats"></div>
            </div>
        </section>
    </main>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- App Scripts -->
    <script src="js/firebase-config.js?v=0fc8869"></script>
    <script src="js/auth.js?v=0fc8869"></script>
    <script src="js/app.js?v=0fc8869"></script>
    <script src="js/admin.js?v=0fc8869"></script>
</body>
</html>
